{% extends 'admin/base.html.twig' %}

{% block title %}Challenge{% endblock %}

{% block content %}
<div class="container">
    <h2 class="my-4">Challenge Details</h2>

    <div class="card p-4">
        <table class="table">
            <tbody>
                <tr>
                    <th>Id</th>
                    <td>{{ challenge.id }}</td>
                </tr>
                <tr>
                    <th>Name</th>
                    <td>{{ challenge.name }}</td>
                </tr>
                <tr>
                    <th>Description</th>
                    <td>{{ challenge.description }}</td>
                </tr>
                <tr>
                    <th>Date_start</th>
                    <td>{{ challenge.dateStart ? challenge.dateStart|date('Y-m-d H:i:s') : '' }}</td>
                </tr>
                <tr>
                    <th>Type</th>
                    <td>{{ challenge.type }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="chart_div" class="mt-4" style="width: 800px; height: 500px;"></div>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {packages: ['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable({{ chartData|json_encode|raw }});

            var options = {
                title: 'Challenge Data',
                curveType: 'function',
                legend: { position: 'bottom' }
            };

            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }
    </script>

    <div class="mt-3">
        <a href="{{ path('app_challenge_index') }}" class="btn btn-secondary">â¬… Back to List</a>
        <a href="{{ path('app_challenge_generate_pdf') }}" class="btn btn-primary">Generate PDF</a>
    </div>
</div>
{% endblock %}
