<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import java.net.URL?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="ecorayen.controllers.ShowChallengeController"
            prefWidth="600.0" prefHeight="650.0">

   <stylesheets>
      <URL value="@../styles/showstyles.css"/>
   </stylesheets>

   <top>
      <VBox alignment="CENTER" spacing="5.0" styleClass="header-container">
         <padding>
            <Insets bottom="10.0" top="10.0"/>
         </padding>
         <children>
            <Label styleClass="label-header-small" text="Ecoselect"/>
         </children>
      </VBox>
   </top>

   <center>
      <ScrollPane fitToWidth="true" styleClass="transparent-scroll-pane">
         <VBox alignment="CENTER" spacing="10.0" styleClass="card">
            <padding>
               <Insets bottom="15.0" left="20.0" right="20.0" top="15.0"/>
            </padding>
            <children>
               <Label fx:id="nameLabel" alignment="CENTER" maxWidth="400.0"
                      styleClass="label-subheader" wrapText="true"/>

               <ImageView fx:id="challengeImageView" fitHeight="150.0" fitWidth="150.0"
                          preserveRatio="true" smooth="true" styleClass="image-view-rounded"/>

               <Label fx:id="descriptionLabel" alignment="CENTER" maxWidth="400.0"
                      styleClass="label-body-small" wrapText="true"/>

               <VBox alignment="CENTER" spacing="5.0">
                  <Label fx:id="dateStartLabel" styleClass="label-info-small"/>
                  <Label fx:id="dateEndLabel" styleClass="label-info-small"/>
                  <Label fx:id="locationLabel" styleClass="label-info-small"/>
               </VBox>

               <VBox fx:id="qrCodeContainer" alignment="CENTER" spacing="3.0"
                     styleClass="qr-container-small">
                  <padding>
                     <Insets bottom="10.0" left="10.0" right="10.0" top="10.0"/>
                  </padding>
                  <children>
                     <Label styleClass="label-info-tiny" text="Scan for Details"/>
                  </children>
               </VBox>

               <VBox spacing="10.0" styleClass="comments-container">
                  <Label styleClass="label-subheader-small" text="Comments"/>

                  <HBox alignment="CENTER" spacing="5.0">
                     <Button fx:id="sortNewestButton" text="Newest" styleClass="button--sort-small"/>
                     <Button fx:id="sortOldestButton" text="Oldest" styleClass="button--sort-small"/>
                     <Button fx:id="sortPopularButton" text="Popular" styleClass="button--sort-small"/>
                  </HBox>

                  <ListView fx:id="commentsListView" onMouseClicked="#handleCommentSelected"
                            prefHeight="150.0" styleClass="comments-list"/>

                  <HBox spacing="5.0" alignment="CENTER">
                     <TextField fx:id="commentAuthorField" promptText="Author" styleClass="comment-field"/>
                     <TextArea fx:id="commentContentField" promptText="Comment"
                               prefRowCount="3" prefColumnCount="20" styleClass="comment-field"/>
                  </HBox>

                  <HBox spacing="10.0" alignment="CENTER">
                     <Button text="Add Comment" onAction="#handleAddComment"
                             styleClass="button--primary-small"/>
                     <Button text="Update Comment" onAction="#handleUpdateComment"
                             styleClass="button--secondary-small"/>
                     <Button text="Delete Comment" onAction="#handleDeleteComment"
                             styleClass="button--danger-small"/>
                  </HBox>
               </VBox>

            </children>
         </VBox>
      </ScrollPane>
   </center>

   <bottom>
      <VBox alignment="CENTER" spacing="10.0">
         <padding>
            <Insets bottom="10.0" top="10.0"/>
         </padding>
         <children>
            <HBox alignment="CENTER" spacing="10.0">
               <Button text="Edit" onAction="#handleEdit" styleClass="button--secondary-small"/>
               <Button text="Delete" onAction="#handleDelete" styleClass="button--danger-small"/>
               <Button text="Share" onAction="#handleShare" styleClass="button--secondary-small"/>
            </HBox>

            <Button fx:id="printButton" onAction="#handlePrint" styleClass="button--primary-small"
                    text="Print"/>
         </children>
      </VBox>
   </bottom>

</BorderPane>